!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["CopyShareify-js"]=e():t["CopyShareify-js"]=e()}(this,(()=>(()=>{"use strict";var t={d:(e,o)=>{for(var n in o)t.o(o,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:o[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{CopyShareify:()=>i});let o=t=>null!=t;function n(t){if(null==t||0===t.length)throw"element selector not correct/element not found"}const i=function(t){let e=$.extend({action:null,string:null,htmlInputSelector:null,htmlElementSelector:null,htmlImgSelector:null,title:null,description:null,onActionDone:function(){},onActionFailed:function(t){}},t);return $(this).each((function(){let t=$(this),i={};null===e.action?(i.action=$(this).attr("data-action"),o($(this).attr("data-string"))?i.string=$(this).attr("data-string"):o($(this).attr("data-html-input-selector"))?i.htmlInputSelector=$(this).attr("data-html-input-selector"):o($(this).attr("data-html-element-selector"))?i.htmlElementSelector=$(this).attr("data-html-element-selector"):o($(this).attr("data-html-img-selector"))&&(i.htmlImgSelector=$(this).attr("data-html-img-selector")),o($(this).attr("data-title"))&&(i.title=$(this).attr("data-title")),o($(this).attr("data-description"))&&(i.description=$(this).attr("data-description"))):i=e,t.on("click",(function(){let r,l="string";o(i.string)?r=i.string:o(i.htmlInputSelector)?(n($(i.htmlInputSelector)),r=$(i.htmlInputSelector).val()):o(i.htmlElementSelector)?(n($(i.htmlElementSelector)),r=$(i.htmlElementSelector).html()):o(i.htmlImgSelector)&&(n($(i.htmlImgSelector)),r=$(i.htmlImgSelector),l="image");let a=()=>e.onActionDone(i.action,t),c=o=>e.onActionFailed(i.action,t,o);"copy"===i.action?"image"===l?function(t,e,n){if(o(t)&&o($(t))&&0!==$(t).length&&o($(t)[0])){let o=$(t)[0],i=document.createElement("canvas");i.width=o.width,i.height=o.height,i.getContext("2d").drawImage(o,0,0),navigator.clipboard&&navigator.clipboard.writeText?i.toBlob((function(t){navigator.clipboard.write([new ClipboardItem({"image/png":t})]).then((function(){e()})).catch((function(t){n(t)}))})):(n("Copy image to clipboard is not supported in this browser."),console.error("Copy image to clipboard is not supported in this browser."))}else n("Image element not found"),console.error("Image element not found")}(r,a,c):"string"===l&&function(t,e,o){if(navigator.clipboard&&navigator.clipboard.writeText)navigator.clipboard.writeText(t).then((function(){e()})).catch((function(t){o(t)}));else if(document.queryCommandSupported&&document.queryCommandSupported("copy")){let n=document.createElement("textarea");n.value=t,n.style.position="fixed",document.body.appendChild(n),n.select();try{document.execCommand("copy")?e():o()}catch(t){o(t)}document.body.removeChild(n)}else o("Copy to clipboard is not supported in this browser."),console.error("Copy to clipboard is not supported in this browser.")}(r,a,c):"share"===i.action&&("string"===l?function(t,e,o,n,i){navigator.share?navigator.share({title:t,text:e,url:o}).then((function(){n()})).catch((function(t){i(t)})):(i("Web Share API is not supported in this browser"),console.warn("Web Share API is not supported in this browser"))}(i.title,i.description,r,a,c):"image"===l&&function(t,e,n,i,r){if(navigator.share&&o(n)&&o($(n))&&o($(n)).attr("src")){const t=$(n).attr("src");fetch(t).then((t=>t.blob())).then((t=>{const e=new File([t],"image.png",{type:t.type});navigator.share({files:[e]}).then((()=>{i()})).catch((t=>{r(t)}))})).catch((t=>{r(t)}))}else console.warn("Web Share API or image element not supported in this browser"),r("Web Share API or image element not supported in this browser")}(i.title,i.description,r,a,c))}))})),this};return jQuery.fn.CopyShareify=i,e})()));